<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Eetdagboek</title>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-resource/1.6.4/angular-resource.js"></script>


    <script>

        var app = angular.module("app",['ngResource']);

        app.factory("eetdagboekservice",function($resource){
             return $resource('http://localhost:27017/api/Maaltijd/:id',{EetDagboek: "@@EetService"}
            );

        });

        app.controller("EetController", function($scope, eetdagboekservice){

            $scope.datum = new Date();

//            Breakfast
            $scope.GetInputBreakfast = function(){
                $scope.visibleBreakfast = true;

                $scope.GetInputBreakfast = function(){
			         $scope.visibleBreakfast = !$scope.visibleBreakfast;
		          }
            }

            $scope.inputsBreakfast = [];
            $scope.moreInputsBreakfast = function(value){
                console.log(" input + 1");
                $scope.inputsBreakfast.push(value);
            };

            // Lunch
            $scope.GetInputLunch = function(){
                $scope.visibleLunch = true;

                $scope.GetInputLunch = function(){
			         $scope.visibleLunch = !$scope.visibleLunch;
		          }
            }

            $scope.inputsLunch = [];
            $scope.moreInputsLunch = function(value){
                console.log(" input + 1");
                $scope.inputsLunch.push(value);
            };

            // Diner
            $scope.GetInputDiner = function(){
                $scope.visibleDiner = true;

                $scope.GetInputDiner = function(){
			         $scope.visibleDiner = !$scope.visibleDiner;
		          }
            }

            $scope.inputsDiner = [];
            $scope.moreInputsDiner = function(value){
                console.log(" input + 1");
                $scope.inputsDiner.push(value);
            };

            // Snack
            $scope.GetInputSnack = function(){
                $scope.visibleSnack = true;

                $scope.GetInputSnack = function(){
			         $scope.visibleSnack = !$scope.visibleSnack;
		          }
            }

            $scope.inputsSnack = [];
            $scope.moreInputsSnack = function(value){
                console.log(" input + 1");
                $scope.inputsSnack.push(value);
            };

            // select feeling voor elk appart
            var feeling = [
                { id: '1', name: 'Normal' },
                { id: '2', name: 'Bloating' },
                { id: '3', name: 'Heavy belly' }
            ];

            $scope.feelingBreakfast = {
                availableOptions: feeling,
                    selectedOption: {id: '1', name: 'Normal'}
            };

            $scope.feelingLunch = {
                availableOptions: feeling,
                selectedOption: { id: '1', name: 'Normal' }
            };

            $scope.feelingDiner = {
                availableOptions:feeling,
                selectedOption: { id: '1', name: 'Normal' }
            };

            $scope.feelingSnack = {
                availableOptions:feeling,
                selectedOption: { id: '1', name: 'Normal' }
            };

            $scope.PostInputBreakfast = function () {

                var maaltijd = {
                    "Dag": dag,
                    "Titel": "Breakfast",
                    "Voedsel": $scope.inputsBreakfast,
                    "Gevoel": $scope.feelingBreakfast.selectedOption
                };

                var dag = {
                    "Maaltijden": maaltijd.Voedsel,
                    "Gevoel": $scope.feelingBreakfast.selectedOption.name,
                    "datum": $scope.datum
                };
                console.log("save");
                eetdagboekservice.save(maaltijd);
            }


            $scope.PostInputLunch = function () {
                var maaltijd = {
                    "Dag": dag,
                    "Titel": "Lunch",
                    "Voedsel": $scope.inputsLunch,
                    "Gevoel": $scope.feelingLunch.selectedOption
                };

                var dag = {
                    "Maaltijden": maaltijd.Voedsel,
                    "Gevoel": $scope.feelingLunch.selectedOption.name,
                    "datum": $scope.datum
                };
                console.log("save");
                eetdagboekservice.save(maaltijd);
            }


            $scope.PostInputDiner = function () {
                var maaltijd = {
                    "Dag": dag,
                    "Titel": "Diner",
                    "Voedsel": $scope.inputsDiner,
                    "Gevoel": $scope.feelingDiner.selectedOption
                };
                var dag = {
                    "Maaltijden": maaltijd.Voedsel,
                    "Gevoel": $scope.feelingDiner.selectedOption.name,
                    "datum": $scope.datum
                };
                console.log("save");
                eetdagboekservice.save(maaltijd);
            }


            $scope.PostInputSnack = function () {
                var maaltijd = {
                    "Dag": dag,
                    "Maaltijd": "Snack",
                    "Voedsel": $scope.inputsSnack,
                    "Gevoel": $scope.feelingSnack.selectedOption
                }
                var dag = {
                    "Maaltijden": maaltijd.Voedsel,
                    "Gevoel": $scope.feelingSnack.selectedOption.name,
                    "datum": $scope.datum
                };
                console.log("save");
                eetdagboekservice.save(maaltijd);
            }
//
//           $scope.GetHotels = function(){
//              $scope.data = hotelservice.query();
//           }
//
//           var hotel  = {
//               "Name":"tom",
//               "Country":"Engeland",
//               "Price":333
//           };
//           $scope.PostHotel = function(){
//                hotelservice.save({Name: 'ppp', Country: 'ttt',Price:333});
//           }
//
//           $scope.GetHotelById = function(){
//               $scope.data = hotelservice.get({hotel: 3});
//           }
        });

    </script>

</head>
<body ng-app="app">

    <div ng-controller="EetController">
        <h1>Food Diary </h1>
        <h2>Today: {{datum | date: fullDate}}</h2>
        <p><button ng-click="GetInputBreakfast()">Breakfast</button> </p>
        <div ng-show="visibleBreakfast">
            <p>What did you eat for breakfast?</p>
            <form ng-submit="moreInputsBreakfast(EetController.MyText)">
                <input type="text" ng-model="EetController.MyText" />
                <button type="submit">Add</button>
            </form>
            {{inputsBreakfast}}
            <p>How did you feel?</p>
            <select name="mySelect" id="mySelect"
                    ng-options="option.name for option in feelingBreakfast.availableOptions track by option.name"
                    ng-model="feelingBreakfast.selectedOption"></select>
            {{feelingBreakfast.selectedOption}}
            <p><button ng-click="PostInputBreakfast()">Opslaan</button></p>
        </div>

        <p><button ng-click="GetInputLunch()">Lunch</button> </p>
        <div ng-show="visibleLunch">
            <p>What did you eat for Lunch?</p>
            <form ng-submit="moreInputsLunch(EetController.MyText)">
                <input type="text" ng-model="EetController.MyText" />
                <button type="submit">Add</button>
            </form>
            {{inputsLunch}}
            <button ng-click="moreInputsLunch();">+</button>
            <p>How did you feel?</p>
            <select name="mySelect" id="mySelect"
                    ng-options="option.name for option in feelingLunch.availableOptions track by option.name"
                    ng-model="feelingLunch.selectedOption"></select>
            {{feelingLunch.selectedOption}}
            <p><button ng-click="PostInputLunch()">Opslaan</button></p>
        </div>

        <p><button ng-click="GetInputDiner()">Diner</button> </p>
        <div ng-show="visibleDiner">
            <p>What did you eat for Diner?</p>
                <form ng-submit="moreInputsDiner(EetController.MyText)">
                    <input type="text" ng-model="EetController.MyText" />
                    <button type="submit">Add</button>
                </form>
            <p>How did you feel?</p>
            <select name="mySelect" id="mySelect"
                    ng-options="option.name for option in feelingDiner.availableOptions track by option.name"
                    ng-model="feelingDiner.selectedOption"></select>
            <p><button ng-click="PostInputDiner()">Opslaan</button></p>
        </div>

        <p><button ng-click="GetInputSnack()">Snack</button> </p>
        <div ng-show="visibleSnack">
            <p>What snacks did you have?</p>
            <form ng-submit="moreInputsSnack(EetController.MyText)">
                <input type="text" ng-model="EetController.MyText" />
                <button type="submit">Add</button>
            </form>
            <p>How did you feel?</p>
            <select name="mySelect" id="mySelect"
                    ng-options="option.name for option in feelingSnack.availableOptions track by option.name"
                    ng-model="feelingSnack.selectedOption"></select>
            <p><button ng-click="PostInputSnack()">Opslaan</button></p>
        </div>
    </div>

    <hr>


    <!--
       <div ng-controller="HotelController">
           {{data}}
           <button ng-click="GetHotels()" value="Get Hotels">Get Hotels</button>
           <br>
           <button ng-click="PostHotel()" value="Post Hotels">Post Hotels</button>
           <br>
           <button ng-click="GetHotelById()" value="Post Hotels">Get hotel by id</button>
       </div>
    -->
</body>
</html>